import"./hoisted.fkd-gwp4.js";document.addEventListener("DOMContentLoaded",function(){fetch("/api/licenses.json").then(t=>t.json()).then(t=>{}),document.querySelectorAll(".toggle-btn").forEach(t=>{t.addEventListener("click",function(){t.classList.toggle("bg-orange-500"),t.classList.toggle("text-white"),t.classList.toggle("border-orange-500"),t.classList.toggle("bg-gray-200"),t.classList.toggle("text-gray-900"),t.classList.toggle("border-gray-300")})}),document.getElementById("generate-button").addEventListener("click",f),document.getElementById("dropdown-toggle").addEventListener("click",r),document.getElementById("search-input").addEventListener("input",p),window.selectLicense=m;async function f(){const t=document.getElementById("name").value.trim(),i=Array.from(document.querySelectorAll("#permissionsForm .toggle-btn.bg-orange-500")).map(s=>s.id),l=Array.from(document.querySelectorAll("#limitationsForm .toggle-btn.bg-orange-500")).map(s=>s.id);document.getElementById("content").remove();const n=document.getElementById("loading");n.classList.remove("hidden"),n.classList.add("fade-in"),document.getElementById("loading-text").innerText=`Get ready! You selected: 
        Permissions: ${i.join(", ")||"None"}
        Limitations: ${l.join(", ")||"None"}`;const c=await(await fetch("/api/licenses.json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,permissions:i,limitations:l})})).json(),a=document.getElementById("license-list");if(a.innerHTML="",c.length===0){const s=document.createElement("li");s.className="px-4 py-2",s.textContent="No matching licenses found",a.appendChild(s)}else c.forEach(s=>{const o=document.createElement("li");o.className="px-4 py-2 hover:bg-gray-200 dark:hover:bg-gray-700 cursor-pointer",o.textContent=s.title,o.setAttribute("data-file",s.file),o.onclick=()=>m(s.file,t),a.appendChild(o)});n.classList.add("hidden"),document.getElementById("license-selection").classList.remove("hidden"),document.getElementById("license-selection").classList.add("fade-in")}function r(){document.getElementById("dropdown").classList.toggle("hidden")}function p(t){const i=t.target.value.toLowerCase(),n=document.getElementById("license-list").getElementsByTagName("li");for(let e=0;e<n.length;e++){const c=n[e].textContent||n[e].innerText;n[e].style.display=c.toLowerCase().indexOf(i)>-1?"":"none"}}async function m(t,i){r();const n=await(await fetch(`/src/db/${t}`)).text(),{metadata:e,body:c}=u(n,i);document.getElementById("license-text").textContent=c,document.getElementById("license-title").textContent=e.title,document.getElementById("license-description").textContent=e.description,g("permissions-list",e.permissions,"fa-check"),g("limitations-list",e.limitations,"fa-times"),y("conditions-list",e.conditions),document.getElementById("license-content").classList.remove("hidden")}function u(t,i){const l=t.split("---").filter(o=>o.trim()!==""),n=l[0].trim();let e=l[1].trim();const c=new Date().getFullYear();e=e.replace(/\[fullname\]/g,i),e=e.replace(/\[year\]/g,c);const a=n.split(`
`),s={};for(const o of a)o.startsWith("title:")?s.title=o.replace("title: ","").trim():o.startsWith("description:")?s.description=o.replace("description: ","").trim():o.startsWith("permissions:")?s.permissions=d(a,a.indexOf(o)):o.startsWith("conditions:")?s.conditions=d(a,a.indexOf(o)):o.startsWith("limitations:")&&(s.limitations=d(a,a.indexOf(o)));return{metadata:s,body:e}}function d(t,i){const l=[];for(let n=i+1;n<t.length;n++){const e=t[n].trim();if(e.startsWith("- "))l.push(e.replace("- ","").trim());else break}return l}function g(t,i,l){const n=document.getElementById(t);if(n.innerHTML="",i&&i.length>0)i.forEach(e=>{const c=document.createElement("li");c.className="flex justify-between items-center",c.innerHTML=`${e} <i class="fas ${l}"></i>`,n.appendChild(c)});else{const e=document.createElement("li");e.textContent="None",n.appendChild(e)}}function y(t,i){const l=document.getElementById(t);l.innerHTML="";const n={"include-copyright":"fa-copyright","disclose-source":"fa-code-branch","document-changes":"fa-file-alt","network-use-disclose":"fa-wifi","same-license":"fa-dollar-sign"};if(i&&i.length>0)i.forEach(e=>{const c=document.createElement("li");c.className="flex justify-between items-center";const a=n[e]||"";c.innerHTML=`${e} ${a?`<i class="fas ${a}"></i>`:""}`,l.appendChild(c)});else{const e=document.createElement("li");e.textContent="None",l.appendChild(e)}}});
